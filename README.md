# [포트폴리오 병렬 확장 웹소켓 프로젝트]

## 프로젝트 설명

- 본 프로젝트는 Springboot 를 사용하여 WebSocket 서버를 구축하는 샘플 프로젝트입니다.<br>
  <br>
  저는 실용적인 WebSocket 서버 개발 방식을 보여드리기 위하여,<br><br>

  WebSocket 통신 핵심 기술 외,<br><br>

  MSA,<br>
  세션 보안<br>
  메시지 브로커 연동,<br>
  서버 복제를 통한 수평적 확장,<br><br>

  등의 응용기술과 더불어,<br><br>

  Springboot 를 이용한 WebSocket 서버 개발시 가독성, 유지보수성, 효율성을 보장하는 개발 패턴을 설명드립니다.<br>
  <br>

- HTTP 기반 API 개발 능력뿐 아닌 TCP/IP 기반 실시간 양방향 통신 서비스 개발 능력을 증명하는 것이 목표입니다.

## 프로젝트 설명 상세

### STOMP

저는 본 springboot 프로젝트에서 Socket 모듈을 만들 때,<br>
STOMP 를 사용하였습니다.<br>

#### STOMP(Simple/Stream Text Oriented Message Protocol) 란,

이름 그대로 websocket 위에서 동작하는 텍스트 기반 메세징 프로토콜(통신 방법/약속)입니다.<br>

STOMP 의 주요 특징은<br>

1. 메시지를 프레임 단위로 전송하여 HTTP 와 비슷한 구조를 가짐
2. pub/sub 패턴을 가짐<br>

위와 같습니다.<br>

쉽게 설명하기 위하여, websocket 을 그대로 사용할 때와 비교하자면,<br>

연결 - 메시지 전송(반복) - 연결 종료<br>

websocket 은 위와 같은 단순한 프로세스로, 메시지의 종류, 형태, 방식 등을 정하는 것이 자유롭지만,
서비스를 구현하기 위해 동일한 로직이라도 천차만별의 구현 방식이 있을 수 있습니다.<br>

이러한 자유로움으로 인하여 동일한 기능을 개발할 때에도 매번 같은 어려움과 같은 혼란을 겪을 수도 있습니다.<br>

STOMP 의 경우는,<br>
클라이언트-서버 간 보내는 메시지의 형태와 종류를 정형화하였습니다.<br>

STOMP 프레임의 구조는,<br>

```
COMMAND
header1:value1
header2:value2

Body
```

위와 같습니다.<br>

앞서 설명했듯, HTTP 와 유사한 형태로,<br>
이 중 COMMAND 의 종류를 살펴보자면,<br>

CONNECT : 클라이언트가 서버와 연결<br>
CONNECTED : 서버가 클라이언트 연결 승인<br>
SUBSCRIBE : 클라이언트가 특정 주제 구독<br>
UNSUBSCRIBE : 클라이언트가 특정 주제 구독 취소<br>
SEND : 클라이언트가 메시지 발행<br>
MESSAGE : 서버가 구독한 클라이언트에게 메시지를 발행<br>
DISCONNECT : 클라이언트가 연결 종료<br>

위와 같으며, <br>

예를 들자면,<br>

```
SEND
destination:/topic/chat
content-type:text/plain

안녕하세요!
```

위와 같은 형태로 메시지를 보낸다면 /topic/chat 이라는 위치로 "안녕하세요!" 라는 메시지를 보내는 것으로 해석되는 것입니다.<br>

이처럼 STOMP 는 그 이름답게 간단하게 메시지 기반의 통신을 위해 필요한 기능들을 구현함에 있어서 가장 효율적인 형식을 정해두었으므로,<br>
채팅 서비스와 같은 대표적인 소켓 통신 서비스를 만들 때 유리합니다.<br>

다만, 위와 같이 정해진 규칙을 준수해야하므로 반드시 형식에 맞는 요청을 보내야만 하기에 쓸모없는 오버헤드가 통신 성능에 악영향을 끼칠 수도 있다는 단점이 있습니다.

#### 제가 본 프로젝트에서 STOMP 를 선택한 이유는,

JWM 위에서 돌아가는 Java 기반의 프레임워크인 Springboot 는 최고 성능을 기대하기 위해 사용하는 프레임워크가 아닌, 개발 효율성과 가독성, 유지보수성에 중점을 둔 가치를 지니고 있기에,<br>

마찬가지로 최고 효율을 보장하지는 않지만 가독성과 유지보수성을 높여주는 STOMP 야 말로 Springboot 에서 개발하기 좋은 Socket 프로토콜이라고 생각했으며,<br>

STOMP 의 pub/sub 구조가 Kafka 와 같은 메시지 브로커의 구조와 동일하기에 이와 연동하여 MSA 를 구축하기 좋기에 선택하였습니다.<br>

추가로,<br>
만약 온라인 게임과 같은 서비스에서 좌표 데이터, 버튼 입력 데이터 등의 비정형의 실시간 정보 통신의 경우는 성능이 최우선이므로 C 언어와 같은 고성능 언어로 별도의 서버 모듈을 만들어 구현을 하는 것이 유리한
결정일 수도 있을테지만,<br>

텍스트 기반의 정보 전달이 주가 되는 채팅과 같은 서비스를 구현할 때에는 성능보다는 개발자 편의가 우선된다고 생각되므로 저는 Springboot + STOMP 기술 스택을 선택할 것입니다.

## 프로젝트 실행 방법

먼저, 본 프로젝트의 결과물을 확인하는 방법을 설명드립니다.<br>
본 프로젝트는 채팅 서비스와 같은 정식 서비스 구현이 목표가 아닌, 웹소켓을 다루는 것이 목표이므로, 간단하게 채팅방 1개에 대한 연결을 가정하는 간단한 HTML 및 Javascript 예시를
준비해두었습니다.<br>
동작 확인을 위해서는 아래와 같이 진행하세요.<br>

### 111

111<br>

111<br>